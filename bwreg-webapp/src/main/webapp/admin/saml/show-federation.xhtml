<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="jakarta.faces.core"
	xmlns:h="jakarta.faces.html"
	xmlns:ui="jakarta.faces.facelets"
	xmlns:bw="http://www.scc.kit.edu/bwfacelets"
	xmlns:p="http://primefaces.org/ui">
<head>
<title></title>
</head>
<body>
<f:view>
	<f:metadata>
		<f:viewParam name="id" value="#{showFederationBean.id}"/>
		<f:event type="javax.faces.event.PreRenderViewEvent"
            listener="#{showFederationBean.preRenderView}" />
	</f:metadata>

<ui:composition template="/template/default-admin.xhtml">
	<ui:param name="title" value="#{messages.title}"/>

	<ui:define name="content">
	<h:form id="form">
		<h2><h:outputText value="#{messages.federation}: #{showFederationBean.entity.name}"/></h2>
	
		<div id="panelInline">
			<p:panel header="#{messages.federation}">
				<p:panelGrid id="baseData" columns="2">
		
			        <h:outputText value="#{messages.id}:"/>
			        <h:outputText value="#{showFederationBean.entity.id}"/>
			
			        <h:outputText value="#{messages.name}:"/>
			        <h:outputText value="#{showFederationBean.entity.name}"/>
						
			        <h:outputText value="#{messages.short_name}:"/>
			        <h:outputText value="#{showFederationBean.entity.shortName}"/>
						
			        <h:outputText value="#{messages.entity_id}:"/>
			        <h:outputText value="#{showFederationBean.entity.entityId}"/>
						
			        <h:outputText value="#{messages.url}:"/>
			        <h:outputText value="#{showFederationBean.entity.federationMetadataUrl}"/>
						
			        <h:outputText value="#{messages.entity_category}:"/>
			        <h:outputText value="#{showFederationBean.entity.entityCategoryFilter}"/>
						
			        <h:outputText value="#{messages.entity_filter_rule}:"/>
			        <h:outputText value="#{showFederationBean.entity.entityFilterRulePackage.packageName}.#{showFederationBean.entity.entityFilterRulePackage.knowledgeBaseName} (#{showFederationBean.entity.entityFilterRulePackage.knowledgeBaseVersion})"/>
						
			        <h:outputText value="#{messages.polled_at}:"/>
			        <h:outputText value="#{showFederationBean.entity.polledAt}"/>

				</p:panelGrid>
				<h:link outcome="edit-federation.xhtml" value="#{messages.edit}">
					<f:param name="id" value="#{showFederationBean.entity.id}"/>
				</h:link>
				<div>
					<h:commandLink value="#{messages.poll_now}" action="#{showFederationBean.poll()}" />
				</div>
			</p:panel>
		</div>
		
		
   		<div id="panelInline" style="margin-top: 8px;">
			<p:panel header="#{messages.idp_entities}">
		    	<p:dataTable id="idpTable" var="idp" value="#{showFederationBean.idpList}">
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.id}" />
						</f:facet>
						<h:outputText value="#{idp.id}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.entity_id}" />
						</f:facet>
						<h:link outcome="show-idp.xhtml" value="#{idp.entityId}">
							<f:param name="id" value="#{idp.id}"/>
						</h:link>
					</p:column>			    	
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.org_name}" />
						</f:facet>
						<h:outputText value="#{idp.orgName}" />
					</p:column>			    	
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.status}" />
						</f:facet>
						<h:outputText value="#{idp.idIdpStatus}/#{idp.aqIdpStatus}" />
					</p:column>			    	
		    	</p:dataTable>	
			</p:panel>
		</div>
		
   		<div id="panelInline" style="margin-top: 8px;">
			<p:panel header="#{messages.sp_entities}">
		    	<p:dataTable id="spTable" var="idp" value="#{showFederationBean.spList}">
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.id}" />
						</f:facet>
						<h:outputText value="#{idp.id}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.entity_id}" />
						</f:facet>
						<h:link outcome="show-sp.xhtml" value="#{idp.entityId}">
							<f:param name="id" value="#{idp.id}"/>
						</h:link>
					</p:column>			    	
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.org_name}" />
						</f:facet>
						<h:outputText value="#{idp.orgName}" />
					</p:column>			    	
		    	</p:dataTable>	
			</p:panel>
		</div>
		
   		<div id="panelInline" style="margin-top: 8px;">
			<p:panel header="#{messages.aa_entities}">
		    	<p:dataTable id="aaTable" var="idp" value="#{showFederationBean.aaList}">
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.id}" />
						</f:facet>
						<h:outputText value="#{idp.id}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.entity_id}" />
						</f:facet>
						<h:link outcome="show-idp.xhtml" value="#{idp.entityId}">
							<f:param name="id" value="#{idp.id}"/>
						</h:link>
					</p:column>			    	
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{messages.org_name}" />
						</f:facet>
						<h:outputText value="#{idp.orgName}" />
					</p:column>			    	
		    	</p:dataTable>	
			</p:panel>
		</div>
				
	</h:form>

	</ui:define>
</ui:composition>
</f:view>		
</body>
</html>
